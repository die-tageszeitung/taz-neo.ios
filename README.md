# taz.neo

iOS-App for reading the "taz" digital newspaper

## Author

Norbert Thies, norbert@taz.de   
Ringo Müller, https://github.com/bochos-bln

## License

taz.neo is available under the AGPL. See the LICENSE file for more info.


## Setup & Requirements
- Place the "North Lib" Project Library directory next to the taz.neo directory
- **may add post-checkout hook by:**
  - mkdir .git/hooks
  - cp taz.neo/Supporting\ Files/Scripts/post-checkout-prototype.sh .git/hooks/post-checkout
  - chmod u+x .git/hooks/post-checkout
- **may generate (gitignored) BuildConst.swift && ConfigSettings.xcconfig by:**
  - ruby taz.neo/Supporting\ Files/Scripts/genBuildConst.rb -D
  To get rid of: "Build input file cannot be found: '~/src/TAZ/taz-neo.ios/taz.neo/Supporting Files/Scripts/BuildConst.swift'"
- may add fonts and other optional files
- run (with latest released Xcode) and enjoy

## Branching & Release Builds
- there are 3 permanent branches: release, beta, alpha
  - **release** branch
     - contains production code, anything here is: deployable, code-reviewed, tested
       - review code on merge (Pair Code Review)
       - use pull requests!
       - test after merge
     - usually only merge from beta or hotfix-??? branches to release branch
     - use the beta branch fo merge and test different features and fixes 
     - a merge to release branch is usually associated with a release Build (at lease a Release Candidate) 
     - after App Store Publishing the related Commit gets the related Tag with the Version Number
  - **beta** branch
     - development start from here and (finally) target the beta branch
     - review code on merge (reviewer should be a 2nd person: 4-eyes / two-men rule)
     - test merged code
     - sync with master frequently (at least after/before Release)
   - **alpha** branch
     - review code on merge (reviewer is the developer)
     - sync with master/beta frequently (at least after/before Release)
- there are additionally temporary branches: hotfix-someStrangeBugFix, feature-aNewFeature
  - **hotfix-...** branch
     - branched from release, targeting release
   - **feature-...** branch
     - project is buildable
     - frequently pull latest changed from one of the permanent branches (release, beta, alpha)
     - merge demo/preview from feature branches to alpha branch with a code review (by developer) 

### Alpha Builds **de.taz.taz.neo**
- should be created from "alpha" Branch
- should have the App Name: "taz.alpha"
- has a taz App Icon with an additional ⍺

### Beta Builds **de.taz.taz.beta**
- should be created from "beta" Branch
- should have the App Name: "taz.beta"
- currently have no Push Notifications
- has a taz App Icon with an additional ß

### App Store Builds **de.taz.taz.2**
- should be created from "release" Branch
- should have the App Name: "die tageszeitung"
- has the default taz App Icon

### Debug run and App Archiving
- change the BundleID/App name (above) depending on current git branch (in post-checkout hook @see above: Setup...)
- in archive step, check if local git is in sync with desired branch in official repository to support the requirements from above for beta and Release Builds
- there is just 1 Target for the app
- builds number scheme ist autogenerated within yyyMMdd??

### Branch & Environment Switch while Xcode is running
- Attention: Xcode ignores changes in current xcschemes (and project) file(s) so:
  - Option 1: restart xcode   
    close xcode by:    
    >> kill $(ps aux | grep 'Xcode' | awk '{print $2}')   
    >> cd ~/src/TAZ/taz-neo.ios/taz.neo/Supporting\ Files/Scripts   
    >> ./changeConfiguration.sh Alpha|Beta|Release   
    open xcode with:    
    >> xed   
  - Option 2: delete content of:   
    ~/Library/Developer/Xcode/DerivedData/ModuleCache.noindex   
    and   
    ~/Library/Developer/Xcode/DerivedData/taz.neo   
    to tell xcode to re-read theese files   
- **Change environment** (alpha|betarelease) from commandline, in taz.neo project dir:   
    >> ./taz.neo/Supporting\ Files/Scripts/refreshEnvironment.sh alpha
- **generate current build number** (without commit and remote check)   
    >> ruby taz.neo/Supporting\ Files/Scripts/genBuildConst.rb -in

